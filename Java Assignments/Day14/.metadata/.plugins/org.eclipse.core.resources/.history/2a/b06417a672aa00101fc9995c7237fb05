package com.demo.test;

import java.util.List;
import java.util.Scanner;

import com.demo.beans.Employee;
import com.demo.service.EmployeeService;
import com.demo.service.EmployeeServiceImpl;

public class TestCrudDemo {

	public static void main(String[] args) {
		
		String string = ;
		Scanner sc = new Scanner(System.in);
		EmployeeService eservice = new EmployeeServiceImpl();
		eservice.readFile("EmplData.txt");

		int choice = 0;
		do {
			System.out.println("1. Add new Employee\n" + "2. Display All\n" + "3. Search By Id\n" + "4. Delete By Id\n"
					+ "5. Modify Salary By Id\n" + "6. Save & Exit");
			System.out.println("------------------------------------------------------");
			System.out.println("Enter Your Choice : ");
			choice = sc.nextInt();
			switch (choice) {
			case 1 -> {
				boolean status = eservice.addNewEmployee();
				if (status) {
					System.out.println("------------------------------------------------------");
					System.out.println("Employee Added Successfully");
					System.out.println("------------------------------------------------------");
				} else {
					System.out.println("------------------------------------------------------");
					System.out.println("Employee Not Added");
					System.out.println("------------------------------------------------------");
				}
			}
			case 2 -> {
				List<Employee> lst = eservice.displayAll();
				if (lst == null) {
					System.out.println("------------------------------------------------------");
					System.out.println("No Employees Exist...");
					System.out.println("------------------------------------------------------");
				} else {
					System.out.println("------------------------------------------------------");
					lst.forEach((e) -> System.out.println(e));
					System.out.println("------------------------------------------------------");
//					lst.forEach(System.out::println);
//					System.out.println("------------------------------------------------------");
				}
			}
			case 6->{
				boolean status = eservice.writeToFile(string);
				if(status) {
					System.out.println("------------------------------------------------------");
					System.out.println("Employee Added To File Successfully");
					System.out.println("You are now out of the Application... Thankyou for choosing us..");
					System.out.println("------------------------------------------------------");
				}
				else {
					System.out.println("------------------------------------------------------");
					System.out.println("Something went wrong");
					System.out.println("------------------------------------------------------");
					sc.close();
				}
			}
			default -> {
				System.out.println("Wrong Input Plzz Re-Enter...");
			}
			}
		} while (choice != 7);

	}

}
